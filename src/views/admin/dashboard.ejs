<%- include('comon/header') %>
<!-- Main -->
<div class="main">
  <%- include('comon/topBarSearch') %>
  <style>
    h5 {
      background-color: rgba(25, 135, 84, 1);
      color: white;
      border-radius: 5px;
      padding: 15px;
      text-align: center;
    }
    .table thead tr th {
      background-color: rgba(25, 135, 84, 1);
      color: white;
    }
  </style>
  <!--Main-->
  <div class="cardBox">
    <a class="card" href="students">
      <div>
        <div class="numbers"><%= totalItems %></div>
        <div class="cardName">Students</div>
      </div>

      <img src="/image/students.png" alt="" class="iconImage" loading="lazy" />
    </a>

    <a class="card" href="course">
      <div>
        <div class="numbers"><%= course %></div>
        <div class="cardName">Course</div>
      </div>

      <img src="/image/course.png" alt="" class="iconImage" loading="lazy" />
    </a>

    <a class="card" href="exam">
      <div>
        <div class="numbers"><%= quiz %></div>
        <div class="cardName">Exam</div>
      </div>

      <img src="/image/exam.png" alt="" class="iconImage" loading="lazy" />
    </a>

    <a class="card" href="news">
      <div>
        <div class="numbers"><%= news %></div>
        <div class="cardName">News</div>
      </div>

      <img
        src="/image/notification.png"
        alt=""
        class="iconImage"
        loading="lazy"
      />
    </a>
  </div>
  <div class="details">
    <div class="recentOrders">
      <div class="card">
        <h5>
          Bảng xếp hạng khoá học
          <strong>
            <i class="fa-solid fa-book-open"></i>
          </strong>
        </h5>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Hình ảnh</th>
                  <th>Số bài học</th>
                  <th>Số học sinh đang học</th>
                </tr>
              </thead>
              <tbody>
                <!-- Add data -->
                <% if(data && data.length> 0) { %> <%
                data.forEach(function(user) { %>
                <tr>
                  <td>
                    <img
                      src="<%= user?.imageCourse || '/image/courseDefauft.png'  %>"
                      alt="Avatar"
                      width="50"
                      loading="lazy"
                    />
                  </td>
                  <td style="color: #000000"><%=user?.title %></td>
                  <td>
                    <%= user?.count %>
                    <i class="fa-solid fa-user"></i>
                  </td>
                </tr>
                <% }); %> <% } else { %>
                <tr>
                  <td style="text-align: center" colspan="12">
                    Hiện tại chưa có khoá học nào
                  </td>
                </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        </div>

        <div class="card-footer">
          <nav aria-label="Page navigation example">
            <ul class="pagination justify-content-end">
              <li class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
                <a
                  class="page-link"
                  href="/admin/dashboard?page=<%= currentPage - 1 %>"
                  tabindex="-1"
                  aria-disabled="true"
                  >Previous</a
                >
              </li>
              <% for(let i=1; i <=totalPages; i++) { %>
              <li class="page-item <%= currentPage === i ? 'active' : '' %>">
                <a class="page-link" href="/admin/dashboard?page=<%= i %>">
                  <%= i %>
                </a>
              </li>
              <% } %>
              <li
                class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>"
              >
                <a
                  class="page-link"
                  href="/admin/dashboard?page=<%= currentPage + 1 %>"
                  >Next</a
                >
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>

    <div class="recentCustomers">
      <div class="card">
        <div class="cardHeader">
          <h5>
            Bảng xếp hạng học sinh
            <i class="fa-solid fa-trophy"></i>
          </h5>
        </div>
        <div class="learnBoard">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Hình ảnh</th>
                <th>Họ tên</th>
                <th>Số điểm</th>
              </tr>
            </thead>
            <tbody>
              <% if(rank && rank.length> 0 ) { %> <% rank.forEach(function(user)
              { %>
              <tr>
                <td>
                  <img
                    src="<%= user?.avatar || '/image/userDefault.png'  %>"
                    alt="Avatar"
                    width="60"
                    loading="lazy"
                  />
                </td>
                <td><%= user?.name %></td>
                <td>
                  <%= user?.Score %>
                  <i class="fa-brands fa-bitcoin"></i>
                </td>
              </tr>
              <% }); %> <% } else { %>
              <tr>
                <td style="text-align: center" colspan="3">
                  Sinh viên đang được cập nhật
                </td>
              </tr>
              <% } %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  <!-- MAIN -->
</div>
<%- include('comon/footer') %>
